{% extends "base.html" %}
{% from "_form.html" import ability_fields, language_field %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/toc.css') }}" />
{% endblock %}

{% block content %}
<h2>Trail of cthlulu</h2>
<form>
  <fieldset>
    <legend>Abilities</legend>

    <fieldset>
      <legend>Investigative</legend>
      {% for category in investigative_abilities|sort %}
        {{ ability_fields(category.title(), investigative_abilities[category]) }}
      {% endfor %}
    </fieldset>

    {{ ability_fields("General", general_abilities) }}

  </fieldset>
</form>

<script>
  function populateLanguages() {
      var languageField = document.getElementById("ability-languages");
      var languages = JSON.parse(languageField.dataset.languages);
      var container = document.getElementById("ability-languages-list");
      container.innerHTML = "";
      for (var i=0; i < languageField.value; i++) {
	  var li = document.createElement("li");
          var input = document.createElement("input");
          input.type = "text";
          input.name = "ability-language-" + i;
          input.value = i < languages.length ? languages[i] : "";
	  li.appendChild(input);
          container.appendChild(li);
      }
  }
</script>

{% endblock %}
